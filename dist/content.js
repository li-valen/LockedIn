if("undefined"!=typeof window){const e=document.createElement;document.createElement=function(n){const o=e.call(this,n);if("script"===n.toLowerCase()){const e=o.setAttribute;o.setAttribute=function(n,o){if("src"!==n||!o.includes("apis.google.com")&&!o.includes("recaptcha"))return e.call(this,n,o);console.warn("External script loading blocked:",o)}}return o}}(()=>{"use strict";function e(e){try{chrome.runtime&&chrome.runtime.sendMessage&&chrome.runtime.sendMessage(e).catch(e=>{e.message&&e.message.includes("Extension context invalidated")?console.log("Extension context invalidated, stopping content script"):console.log("Message send failed:",e.message)})}catch(e){console.log("Runtime not available:",e)}}console.log("LockedIn content script loaded");let n=!document.hidden,o=0;document.addEventListener("visibilitychange",()=>{const t=!document.hidden;t&&!n?(console.log("Page became visible"),e({action:"pageVisible",url:window.location.href})):!t&&n&&(console.log("Page became hidden"),o=Date.now(),setTimeout(()=>{document.hidden?e({action:"pageHidden",reason:"navigation"}):console.log("Page hidden briefly (likely popup opening)")},1e3)),n=t});let t=Date.now();["mousedown","keydown","scroll","touchstart"].forEach(n=>{document.addEventListener(n,()=>{const n=Date.now();n-t>3e4&&(t=n,e({action:"userActivity",url:window.location.href}))},{passive:!0})}),document.hidden||e({action:"pageVisible",url:window.location.href})})();