(()=>{"use strict";console.log("LockedIn content script loaded");let e=!document.hidden;document.addEventListener("visibilitychange",()=>{const n=!document.hidden;n&&!e?(console.log("Page became visible"),chrome.runtime.sendMessage({action:"pageVisible",url:window.location.href}).catch(()=>{})):!n&&e&&(console.log("Page became hidden"),chrome.runtime.sendMessage({action:"pageHidden"}).catch(()=>{})),e=n});let n=Date.now();["mousedown","keydown","scroll","touchstart"].forEach(e=>{document.addEventListener(e,()=>{const e=Date.now();e-n>3e4&&(n=e,chrome.runtime.sendMessage({action:"userActivity",url:window.location.href}).catch(()=>{}))},{passive:!0})}),document.hidden||chrome.runtime.sendMessage({action:"pageVisible",url:window.location.href}).catch(()=>{})})();