if("undefined"!=typeof window){const e=document.createElement;document.createElement=function(r){const s=e.call(this,r);if("script"===r.toLowerCase()){const e=s.setAttribute;s.setAttribute=function(r,s){if("src"!==r||!s.includes("apis.google.com")&&!s.includes("recaptcha"))return e.call(this,r,s);console.warn("External script loading blocked:",s)}}return s}}(self.webpackChunklockedin_extension=self.webpackChunklockedin_extension||[]).push([[446],{2446:(e,r,s)=>{s.d(r,{MainPopup:()=>y});var t=s(4848),a=s(6540),l=s(964),o=s(7235),i=s(6858),n=s(7792),d=s(4180),c=s(3893);function x({percentage:e,size:r=160,strokeWidth:s=8}){const a=(r-s)/2,l=2*a*Math.PI,o=l-e/100*l;return(0,t.jsxs)("div",{className:"relative inline-flex items-center justify-center p-12 overflow-visible",children:[(0,t.jsx)("div",{className:"absolute rounded-full bg-purple-500/20 blur-3xl animate-pulse",style:{width:r+60,height:r+60,top:"50%",left:"50%",transform:"translate(-50%, -50%)"}}),(0,t.jsx)("div",{className:"absolute rounded-full bg-purple-400/30 blur-2xl",style:{width:r+40,height:r+40,top:"50%",left:"50%",transform:"translate(-50%, -50%)"}}),(0,t.jsxs)("div",{className:"absolute inset-0 animate-spin-slow",children:[(0,t.jsx)("div",{className:"absolute top-0 left-1/2 w-1 h-1 bg-purple-400/50 rounded-full -translate-x-1/2"}),(0,t.jsx)("div",{className:"absolute bottom-0 left-1/2 w-1 h-1 bg-purple-400/30 rounded-full -translate-x-1/2"})]}),(0,t.jsxs)("svg",{width:r,height:r,viewBox:`0 0 ${r} ${r}`,overflow:"visible",className:"rotate-[-90deg] relative z-10",children:[(0,t.jsx)("circle",{cx:r/2,cy:r/2,r:a,stroke:"rgba(107, 70, 193, 0.1)",strokeWidth:s,fill:"none"}),(0,t.jsx)("circle",{cx:r/2,cy:r/2,r:a,stroke:"url(#glowGradient)",strokeWidth:s+4,fill:"none",strokeDasharray:l,strokeDashoffset:o,strokeLinecap:"round",className:"opacity-40",filter:"url(#glowFilter)"}),(0,t.jsx)("circle",{cx:r/2,cy:r/2,r:a,stroke:"url(#gradient)",strokeWidth:s,fill:"none",strokeDasharray:l,strokeDashoffset:o,strokeLinecap:"round",className:"transition-all duration-700",filter:"url(#mainGlowFilter)"}),(0,t.jsx)("circle",{cx:r/2,cy:r/2,r:a-15,stroke:"rgba(168, 85, 247, 0.2)",strokeWidth:1,fill:"none",strokeDasharray:"4 4",className:"animate-spin-slow"}),(0,t.jsxs)("defs",{children:[(0,t.jsxs)("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[(0,t.jsx)("stop",{offset:"0%",stopColor:"#c084fc"}),(0,t.jsx)("stop",{offset:"50%",stopColor:"#a855f7"}),(0,t.jsx)("stop",{offset:"100%",stopColor:"#7c3aed"})]}),(0,t.jsxs)("linearGradient",{id:"glowGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[(0,t.jsx)("stop",{offset:"0%",stopColor:"#c084fc"}),(0,t.jsx)("stop",{offset:"100%",stopColor:"#7c3aed"})]}),(0,t.jsxs)("filter",{id:"glowFilter",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[(0,t.jsx)("feGaussianBlur",{stdDeviation:"3",result:"coloredBlur"}),(0,t.jsxs)("feMerge",{children:[(0,t.jsx)("feMergeNode",{in:"coloredBlur"}),(0,t.jsx)("feMergeNode",{in:"SourceGraphic"})]})]}),(0,t.jsxs)("filter",{id:"mainGlowFilter",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[(0,t.jsx)("feGaussianBlur",{stdDeviation:"4",result:"coloredBlur"}),(0,t.jsxs)("feMerge",{children:[(0,t.jsx)("feMergeNode",{in:"coloredBlur"}),(0,t.jsx)("feMergeNode",{in:"SourceGraphic"})]})]})]})]}),(0,t.jsx)("div",{className:"absolute top-2 left-2 w-3 h-3 border-t-2 border-l-2 border-purple-400/50"}),(0,t.jsx)("div",{className:"absolute top-2 right-2 w-3 h-3 border-t-2 border-r-2 border-purple-400/50"}),(0,t.jsx)("div",{className:"absolute bottom-2 left-2 w-3 h-3 border-b-2 border-l-2 border-purple-400/50"}),(0,t.jsx)("div",{className:"absolute bottom-2 right-2 w-3 h-3 border-b-2 border-r-2 border-purple-400/50"})]})}function u({rank:e,name:r,hours:s,avatar:a,isCurrentUser:l,userId:o,userEmail:i,onClick:n}){return(0,t.jsxs)("div",{className:"group relative flex items-center gap-3 p-3 rounded-lg transition-all duration-300 "+(l?"bg-gradient-to-r from-purple-500/10 to-purple-600/5 ring-1 ring-purple-500/40 shadow-[0_0_20px_rgba(168,85,247,0.2)]":"hover:bg-gradient-to-r hover:from-[#3a3a3a] hover:to-[#2d2d2d] cursor-pointer"),onClick:()=>{n&&o&&i&&!l&&n(o,r,i)},children:[(0,t.jsx)("div",{className:"absolute top-0 left-0 w-2 h-2 border-t border-l border-purple-400/30 transition-all group-hover:border-purple-400/60"}),(0,t.jsx)("div",{className:`flex items-center justify-center w-8 h-8 ${(e=>1===e?"text-yellow-400":2===e?"text-gray-300":3===e?"text-orange-400":"text-purple-400")(e)} ${(e=>1===e?"shadow-[0_0_20px_rgba(250,204,21,0.3)]":2===e?"shadow-[0_0_15px_rgba(209,213,219,0.2)]":3===e?"shadow-[0_0_15px_rgba(251,146,60,0.2)]":"")(e)} transition-all`,children:e<=3?(0,t.jsx)("span",{className:"text-xl drop-shadow-[0_0_8px_currentColor]",children:"ðŸ†"}):(0,t.jsx)("div",{className:"relative",children:(0,t.jsxs)("span",{className:"opacity-60 text-sm",children:["#",e]})})}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-purple-500 to-purple-700 flex items-center justify-center overflow-hidden shadow-lg shadow-purple-500/30 ring-2 ring-purple-400/20",children:(0,t.jsx)("span",{className:"text-white",children:a})}),l&&(0,t.jsx)("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-green-400 rounded-full border-2 border-[#2d2d2d] shadow-[0_0_8px_rgba(74,222,128,0.6)]"})]}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"truncate flex items-center gap-2",children:[(0,t.jsx)("span",{children:r}),1===e&&(0,t.jsx)("div",{className:"px-1.5 py-0.5 bg-yellow-400/20 text-yellow-400 rounded text-[10px] border border-yellow-400/30",children:"TOP"})]}),(0,t.jsxs)("div",{className:"text-[#a3a3a3] text-sm flex items-center gap-1",children:[(0,t.jsx)("div",{className:"w-1 h-1 bg-purple-400 rounded-full animate-pulse"}),s.toFixed(1),"h worked"]})]}),l&&(0,t.jsx)("div",{className:"px-2.5 py-1 bg-gradient-to-r from-purple-500/30 to-purple-600/20 text-purple-300 rounded-md text-xs border border-purple-400/30 shadow-[0_0_10px_rgba(168,85,247,0.3)]",children:"You"}),(0,t.jsx)("div",{className:"absolute bottom-0 right-0 w-2 h-2 border-b border-r border-purple-400/30 transition-all group-hover:border-purple-400/60"})]})}function p({className:e="w-[45px] h-[45px]",size:r="md",variant:s="gradient"}){return(0,t.jsx)("div",{className:"p-2 overflow-visible",children:(0,t.jsx)("div",{className:`\n          ${{sm:"w-[32px] h-[32px]",md:"w-[45px] h-[45px]",lg:"w-[60px] h-[60px]"}[r]} flex items-center justify-center\n          ${(()=>{switch(s){case"gradient":return"bg-gradient-to-br from-purple-600 via-purple-700 to-purple-800";case"minimal":return"bg-purple-600/20 border border-purple-500/30";default:return"bg-purple-600"}})()}\n          rounded-xl\n          ${e}\n        `,children:(0,t.jsxs)("svg",{className:`${{sm:"w-[18px] h-[18px]",md:"w-[24px] h-[24px]",lg:"w-[32px] h-[32px]"}[r]} text-white`,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,t.jsx)("rect",{x:"6",y:"10",width:"12",height:"8",rx:"2",ry:"2",fill:"currentColor",className:"drop-shadow-sm"}),(0,t.jsx)("path",{d:"M8 10V7C8 4.79086 9.79086 3 12 3C14.2091 3 16 4.79086 16 7V10",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",fill:"none"}),(0,t.jsx)("circle",{cx:"12",cy:"13",r:"1.5",fill:"white",opacity:"0.9"}),(0,t.jsx)("rect",{x:"11.5",y:"13",width:"1",height:"2",fill:"white",opacity:"0.9"})]})})})}var h=s(232),m=s(6316),g=s(5899),b=s(2307),f=s(8686),v=s(6164);function j({userId:e,userName:r,userEmail:s,isOpen:l,onClose:i}){const[d,c]=(0,a.useState)(null),[x,u]=(0,a.useState)([]),[p,j]=(0,a.useState)(!0);(0,a.useEffect)(()=>{l&&e&&w()},[l,e]);const w=async()=>{j(!0);try{console.log("Loading profile data for user:",e);const r=await v.DL.getUser(e);console.log("User data loaded:",r),c(r);const s=await v.DailyStatsService.getUserWeeklyStats(e);console.log("Weekly stats loaded:",s),u(s)}catch(e){console.error("Error loading profile data:",e)}finally{j(!1)}},N=x.reduce((e,r)=>e+r.totalWorkTime,0)/36e5,y=x.length>0?N/x.length:0,k=x.filter(e=>e.goalAchieved).length,C=d?.totalWorkTime||0,S=C>0?(C/36e5).toFixed(1):"0.0";return l?(0,t.jsx)("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-md flex items-center justify-center p-4 z-50 animate-fadeIn",children:(0,t.jsxs)("div",{className:"relative bg-gradient-to-br from-[#2d2d2d] via-[#2d2d2d] to-[#252525] rounded-xl w-full max-w-sm border border-purple-500/30 shadow-2xl shadow-purple-500/20 overflow-hidden max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)("div",{className:"relative p-4 border-b border-white/10",children:[(0,t.jsx)("div",{className:"absolute top-0 left-0 w-2 h-2 border-t border-l border-purple-400/30"}),(0,t.jsx)("div",{className:"absolute top-0 right-0 w-2 h-2 border-t border-r border-purple-400/30"}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("button",{onClick:i,className:"p-2 hover:bg-white/5 rounded-lg transition-all duration-300 group",children:(0,t.jsx)(h.A,{className:"w-4 h-4 group-hover:-translate-x-1 transition-transform"})}),(0,t.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-purple-500 to-purple-700 flex items-center justify-center text-sm shadow-lg shadow-purple-500/50 ring-2 ring-purple-400/20",children:r.charAt(0).toUpperCase()}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("h2",{className:"text-lg font-medium text-white truncate",children:r}),(0,t.jsx)("p",{className:"text-xs text-[#a3a3a3] truncate",children:s})]})]})]}),(0,t.jsx)("div",{className:"p-4 space-y-4",children:p?(0,t.jsx)("div",{className:"flex items-center justify-center py-6",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-purple-500"})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsxs)("div",{className:"relative bg-gradient-to-br from-purple-600/20 to-purple-700/10 rounded-lg p-3 border border-purple-500/20",children:[(0,t.jsx)("div",{className:"absolute top-0 left-0 w-2 h-2 border-t border-l border-purple-400/30"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(o.A,{className:"w-4 h-4 text-purple-400"}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"text-lg font-mono text-purple-300",children:[N.toFixed(1),"h"]}),(0,t.jsx)("div",{className:"text-xs text-[#a3a3a3]",children:"This Week"})]})]})]}),(0,t.jsxs)("div",{className:"relative bg-gradient-to-br from-blue-600/20 to-blue-700/10 rounded-lg p-3 border border-blue-500/20",children:[(0,t.jsx)("div",{className:"absolute top-0 left-0 w-2 h-2 border-t border-l border-blue-400/30"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(m.A,{className:"w-4 h-4 text-blue-400"}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"text-lg font-mono text-blue-300",children:[y.toFixed(1),"h"]}),(0,t.jsx)("div",{className:"text-xs text-[#a3a3a3]",children:"Daily Avg"})]})]})]}),(0,t.jsxs)("div",{className:"relative bg-gradient-to-br from-green-600/20 to-green-700/10 rounded-lg p-3 border border-green-500/20",children:[(0,t.jsx)("div",{className:"absolute top-0 left-0 w-2 h-2 border-t border-l border-green-400/30"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(n.A,{className:"w-4 h-4 text-green-400"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-lg font-mono text-green-300",children:k}),(0,t.jsx)("div",{className:"text-xs text-[#a3a3a3]",children:"Goal Days"})]})]})]}),(0,t.jsxs)("div",{className:"relative bg-gradient-to-br from-yellow-600/20 to-yellow-700/10 rounded-lg p-3 border border-yellow-500/20",children:[(0,t.jsx)("div",{className:"absolute top-0 left-0 w-2 h-2 border-t border-l border-yellow-400/30"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(g.A,{className:"w-4 h-4 text-yellow-400"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-lg font-mono text-yellow-300",children:d?.streak||0}),(0,t.jsx)("div",{className:"text-xs text-[#a3a3a3]",children:"Day Streak"})]})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("h3",{className:"text-sm font-medium text-white mb-3 flex items-center gap-2",children:[(0,t.jsx)(b.A,{className:"w-4 h-4 text-purple-400"}),"This Week's Progress"]}),(0,t.jsx)("div",{className:"space-y-2",children:x.length>0?x.map((e,r)=>{const s=e.totalWorkTime/36e5,a=new Date(e.date),l=a.toLocaleDateString("en-US",{weekday:"short"});return(0,t.jsxs)("div",{className:"flex items-center justify-between p-2 bg-[#1a1a1a] rounded-lg border border-white/5",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-6 h-6 rounded-full bg-gradient-to-br from-purple-500/20 to-purple-600/10 flex items-center justify-center text-xs font-medium text-purple-300",children:l}),(0,t.jsx)("div",{children:(0,t.jsx)("div",{className:"text-xs text-white",children:a.toLocaleDateString()})})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("div",{className:"text-sm font-mono text-purple-300",children:[s.toFixed(1),"h"]}),e.goalAchieved&&(0,t.jsx)("div",{className:"text-xs text-green-400",children:"âœ“"})]})]},e.id)}):(0,t.jsx)("div",{className:"text-center py-4 text-[#a3a3a3] text-sm",children:"No work data available for this week"})})]}),(0,t.jsxs)("div",{className:"relative bg-gradient-to-br from-[#1a1a1a] to-[#0f0f0f] rounded-lg p-3 border border-white/5",children:[(0,t.jsx)("div",{className:"absolute top-0 left-0 w-2 h-2 border-t border-l border-purple-400/30"}),(0,t.jsx)("div",{className:"absolute bottom-0 right-0 w-2 h-2 border-b border-r border-purple-400/30"}),(0,t.jsxs)("h4",{className:"text-xs font-medium text-white mb-2 flex items-center gap-2",children:[(0,t.jsx)(f.A,{className:"w-3 h-3 text-purple-400"}),"Profile Info"]}),(0,t.jsxs)("div",{className:"space-y-1 text-xs",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-[#a3a3a3]",children:"Daily Goal:"}),(0,t.jsxs)("span",{className:"text-white",children:[d?.dailyGoal?d.dailyGoal:3,"h"]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-[#a3a3a3]",children:"Total Work Time:"}),(0,t.jsxs)("span",{className:"text-white",children:[S,"h"]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-[#a3a3a3]",children:"Member Since:"}),(0,t.jsx)("span",{className:"text-white",children:d?.createdAt?new Date(d.createdAt).toLocaleDateString():"Just now"})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-[#a3a3a3]",children:"Current Streak:"}),(0,t.jsxs)("span",{className:"text-white",children:[d?.streak||0," days"]})]})]})]})]})})]})}):null}var w=s(51),N=s(9511);function y({onNavigate:e}){const[r,s]=(0,a.useState)("daily"),[h,m]=(0,a.useState)(!1),[g,b]=(0,a.useState)(""),[f,y]=(0,a.useState)(!1),[k,C]=(0,a.useState)(!1),[S,E]=(0,a.useState)(null),[_,A]=(0,a.useState)(null),[W,z]=(0,a.useState)({workTime:0,dailyWorkTime:0,isWorking:!1}),[D,I]=(0,a.useState)([]),[M,T]=(0,a.useState)(null),[F,G]=(0,a.useState)(!1),[L,U]=(0,a.useState)(null),[P,$]=(0,a.useState)(0),[B,H]=(0,a.useState)(3),q=(new Date).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),V=M?M.totalWorkTime/36e5:W.dailyWorkTime/36e5,O=B,R=Math.min(V/O*100,100);(0,a.useEffect)(()=>{const e=(0,N.hg)(w.j2,async e=>{if(A(e),e){chrome.runtime.sendMessage({action:"setUserId",userId:e.uid});try{await v.DL.getUser(e.uid)||await v.DL.createUser({uid:e.uid,email:e.email||"",displayName:e.displayName||"Anonymous",photoURL:e.photoURL||void 0})}catch(e){console.error("Error creating user:",e)}try{const r=await v.DailyStatsService.getTodayStats(e.uid);T(r)}catch(e){console.error("Error loading today stats:",e)}try{const r=await v.DL.getUserWithStreak(e.uid);r&&($(r.streak),H(r.dailyGoal))}catch(e){console.error("Error loading user streak:",e)}}});return()=>e()},[]),(0,a.useEffect)(()=>{const e=async e=>{if("syncDailyStats"===e.action&&_)try{await v.DailyStatsService.updateDailyStats(_.uid,e.dailyWorkTime,"extension");const r=await v.DailyStatsService.getTodayStats(_.uid);T(r);const s=await v.DL.getUserWithStreak(_.uid);s&&($(s.streak),H(s.dailyGoal))}catch(e){console.error("Error syncing daily stats:",e)}};return chrome.runtime.onMessage.addListener(e),()=>chrome.runtime.onMessage.removeListener(e)},[_]),(0,a.useEffect)(()=>{const e=async()=>{try{const e=await chrome.runtime.sendMessage({action:"getWorkTime"});e&&z({workTime:e.workTime||0,dailyWorkTime:e.dailyWorkTime||0,isWorking:e.isWorking||!1})}catch(e){e instanceof Error&&e.message?.includes("Could not establish connection")||console.error("Failed to fetch work data:",e)}};e();const r=setInterval(e,2e3);return()=>clearInterval(r)},[]),(0,a.useEffect)(()=>{if(!_)return I([]),U(null),void G(!1);G(!0),U(null);try{const e=v.x5.subscribeToLeaderboard(r,e=>{I(e),G(!1),U(null)},_.uid);return()=>{e()}}catch(e){console.error("Error subscribing to leaderboard:",e),U("Failed to load leaderboard"),I([]),G(!1)}},[r,_]);const K=async()=>{try{console.log("Starting Google sign-in...");const e=(await async function(){try{console.log("Starting Google sign-in process...");const e=await new Promise((e,r)=>{chrome.identity.getAuthToken({interactive:!0},s=>{chrome.runtime.lastError?(console.error("Chrome identity error:",chrome.runtime.lastError),r(new Error("Chrome Identity Error: OAuth2 request failed: Service responded with error: 'bad client id: {0}'"))):s?(console.log("Got token from Chrome Identity API:",s.substring(0,20)+"..."),e(s)):r(new Error("No token received from Chrome Identity API"))})});console.log("Token received, creating credential...");const r=w.HF.credential(null,e);console.log("Credential created, signing in with Firebase...");const s=await(0,N.eN)(w.j2,r);return console.log("Firebase sign-in successful:",{uid:s.user?.uid,email:s.user?.email,displayName:s.user?.displayName}),s}catch(e){if(console.error("Google sign-in error:",e),e instanceof Error)throw e.message.includes("Chrome Identity Error")?new Error("Failed to authenticate with Google. Please check your Chrome extension permissions."):e.message.includes("auth/invalid-credential")?new Error("Invalid Google credentials. Please try signing in again."):e.message.includes("auth/network-request-failed")?new Error("Network error. Please check your internet connection."):e.message.includes("auth/internal-error")?new Error("Firebase: Error (auth/internal-error)."):e.message.includes("auth/operation-not-allowed")?new Error("Google sign-in is not enabled. Please contact support."):e.message.includes("auth/too-many-requests")?new Error("Too many sign-in attempts. Please try again later."):new Error(`Sign-in failed: ${e.message}`);throw new Error("An unexpected error occurred during sign-in")}}()).user;console.log("Sign-in successful:",e?.displayName),e?.displayName?alert(`Welcome, ${e.displayName}!`):alert("Successfully signed in!")}catch(e){console.error("Sign-in error:",e);const r=e instanceof Error?e.message:"Unknown error occurred";alert(`Sign-in failed: ${r}`)}},J=async()=>{if(g.trim()&&_&&!f){y(!0);try{await v.Ky.sendFriendRequest(_.uid,g.trim()),b(""),m(!1),alert("Friend request sent!")}catch(e){console.error("Error sending friend request:",e);const r=e instanceof Error?e.message:"Failed to send request";r.includes("already sent")?alert("Friend request already sent to this user!"):alert(`Error: ${r}`)}finally{y(!1)}}},Y=(e,r,s)=>{E({userId:e,userName:r,userEmail:s}),C(!0)};return(0,t.jsxs)("div",{className:"w-full h-full bg-[#1a1a1a] text-[#e5e5e5] overflow-hidden flex flex-col relative",children:[(0,t.jsx)("div",{className:"absolute inset-0 opacity-[0.03] pointer-events-none",children:(0,t.jsx)("div",{className:"absolute inset-0",style:{backgroundImage:"\n            linear-gradient(rgba(168, 85, 247, 0.3) 1px, transparent 1px),\n            linear-gradient(90deg, rgba(168, 85, 247, 0.3) 1px, transparent 1px)\n          ",backgroundSize:"20px 20px"}})}),(0,t.jsx)("div",{className:"absolute inset-0 pointer-events-none opacity-5",children:(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-purple-400/10 to-transparent animate-scan"})}),(0,t.jsxs)("div",{className:"relative bg-gradient-to-r from-[#2d2d2d] via-[#2d2d2d] to-[#3a3a3a] p-4 border-b border-white/10 backdrop-blur-xl",children:[(0,t.jsx)("div",{className:"absolute top-0 left-0 w-8 h-8 border-t-2 border-l-2 border-purple-500/50"}),(0,t.jsx)("div",{className:"absolute top-0 right-0 w-8 h-8 border-t-2 border-r-2 border-purple-500/50"}),(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2 relative z-10",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"relative w-8 h-8 bg-gradient-to-br from-purple-500 to-purple-700 rounded-lg flex items-center justify-center shadow-lg shadow-purple-500/50",children:[(0,t.jsx)(p,{className:"w-4 h-4 text-white"}),(0,t.jsx)("div",{className:"absolute inset-0 bg-purple-400/20 rounded-lg animate-pulse"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-xl tracking-wide",children:"LockedIn"}),(0,t.jsx)("div",{className:"h-px w-16 bg-gradient-to-r from-purple-500 to-transparent"})]})]}),(0,t.jsxs)("button",{onClick:()=>e("settings"),className:"relative p-2 hover:bg-white/5 rounded-lg transition-all duration-300 group",children:[(0,t.jsx)(l.A,{className:"w-5 h-5 text-[#a3a3a3] group-hover:text-purple-400 transition-colors group-hover:rotate-90 duration-300"}),(0,t.jsx)("div",{className:"absolute inset-0 bg-purple-500/0 group-hover:bg-purple-500/10 rounded-lg transition-colors"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-[#a3a3a3] relative z-10",children:[(0,t.jsx)(o.A,{className:"w-4 h-4 text-purple-400"}),(0,t.jsx)("span",{className:"font-mono",children:q}),(0,t.jsxs)("div",{className:"ml-auto flex items-center gap-1",children:[(0,t.jsx)(i.A,{className:"w-3 h-3 "+(W.isWorking?"text-green-400":"text-gray-400")}),(0,t.jsx)("span",{className:"text-xs "+(W.isWorking?"text-green-400":"text-gray-400"),children:W.isWorking?"Working":"Idle"})]})]})]}),(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto overflow-x-visible p-4 space-y-6 relative z-10",children:[(0,t.jsxs)("div",{className:"relative bg-gradient-to-br from-[#2d2d2d] via-[#2d2d2d] to-[#252525] rounded-xl p-6 border border-white/5 shadow-2xl overflow-visible",children:[(0,t.jsx)("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-48 h-48 bg-purple-500/10 rounded-full blur-3xl"}),(0,t.jsx)("div",{className:"absolute top-0 left-0 w-6 h-6 border-t-2 border-l-2 border-purple-400/40"}),(0,t.jsx)("div",{className:"absolute top-0 right-0 w-6 h-6 border-t-2 border-r-2 border-purple-400/40"}),(0,t.jsx)("div",{className:"absolute bottom-0 left-0 w-6 h-6 border-b-2 border-l-2 border-purple-400/40"}),(0,t.jsx)("div",{className:"absolute bottom-0 right-0 w-6 h-6 border-b-2 border-r-2 border-purple-400/40"}),(0,t.jsxs)("div",{className:"flex flex-col items-center relative z-10",children:[(0,t.jsxs)("div",{className:"relative mb-4",children:[(0,t.jsx)(x,{percentage:R}),(0,t.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[(0,t.jsx)("div",{className:"text-4xl text-white tracking-wider font-mono drop-shadow-[0_0_10px_rgba(168,85,247,0.5)]",children:V.toFixed(1)}),(0,t.jsx)("div",{className:"text-xs text-[#a3a3a3] uppercase tracking-widest",children:"hours"})]})]}),(0,t.jsxs)("div",{className:"text-center space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 justify-center",children:[(0,t.jsx)(n.A,{className:"w-4 h-4 text-purple-400"}),(0,t.jsx)("div",{className:"text-[#a3a3a3] text-sm",children:"Today's Progress"})]}),(0,t.jsx)("div",{className:"text-xs text-purple-400 bg-purple-500/10 px-3 py-1 rounded-full border border-purple-500/20",children:V>=O?"ðŸŽ‰ Goal Accomplished!":`${(O-V).toFixed(1)}h remaining to reach goal`}),P>0&&(0,t.jsxs)("div",{className:"text-xs text-yellow-400 bg-yellow-500/10 px-3 py-1 rounded-full border border-yellow-500/20 flex items-center gap-1 justify-center",children:[(0,t.jsx)(d.A,{className:"w-3 h-3"}),P," day streak"]})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("h2",{className:"text-lg tracking-wide",children:"Leaderboard"}),(0,t.jsx)("div",{className:"w-1 h-1 bg-purple-400 rounded-full animate-pulse"})]}),(0,t.jsxs)("div",{className:"relative flex bg-[#2d2d2d] rounded-lg p-1 border border-white/5 shadow-inner",children:[(0,t.jsxs)("button",{onClick:()=>s("daily"),className:"relative px-4 py-1.5 rounded text-sm transition-all duration-300 "+("daily"===r?"text-white shadow-[0_0_20px_rgba(168,85,247,0.3)]":"text-[#a3a3a3] hover:text-[#e5e5e5]"),children:["daily"===r&&(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-600 to-purple-700 rounded shadow-lg"}),(0,t.jsx)("span",{className:"relative z-10",children:"Daily"})]}),(0,t.jsxs)("button",{onClick:()=>s("weekly"),className:"relative px-4 py-1.5 rounded text-sm transition-all duration-300 "+("weekly"===r?"text-white shadow-[0_0_20px_rgba(168,85,247,0.3)]":"text-[#a3a3a3] hover:text-[#e5e5e5]"),children:["weekly"===r&&(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-600 to-purple-700 rounded shadow-lg"}),(0,t.jsx)("span",{className:"relative z-10",children:"Weekly"})]})]})]}),(0,t.jsxs)("div",{className:"relative bg-gradient-to-br from-[#2d2d2d] to-[#252525] rounded-xl p-4 border border-white/5 shadow-2xl overflow-hidden space-y-2",children:[(0,t.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 bg-purple-500/5 rounded-full blur-3xl"}),(0,t.jsx)("div",{className:"relative z-10 space-y-2",children:F?(0,t.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-6 h-6 border-2 border-purple-400 border-t-transparent rounded-full animate-spin"}),(0,t.jsx)("span",{className:"text-[#a3a3a3] text-sm",children:"Loading leaderboard..."})]})}):L?(0,t.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,t.jsxs)("div",{className:"text-center space-y-2",children:[(0,t.jsxs)("div",{className:"text-red-400 text-sm",children:["âš ï¸ ",L]}),(0,t.jsx)("button",{onClick:()=>window.location.reload(),className:"text-purple-400 text-xs hover:text-purple-300 transition-colors",children:"Retry"})]})}):0===D.length?(0,t.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,t.jsxs)("div",{className:"text-center space-y-3",children:[(0,t.jsx)("div",{className:"text-[#a3a3a3] text-sm",children:"No data available yet"}),(0,t.jsx)("div",{className:"text-[#666] text-xs",children:"Start working on tracked sites to appear on the leaderboard!"}),(0,t.jsx)("div",{className:"text-[#666] text-xs",children:"Add friends to see their progress too!"})]})}):D.map(e=>(0,t.jsx)(u,{rank:e.rank,name:e.userName,hours:e.totalWorkTime/36e5,avatar:"ðŸ˜Š",isCurrentUser:e.userId===_?.uid,userId:e.userId,userEmail:e.userEmail,onClick:Y},e.userId))})]}),(0,t.jsx)("div",{className:"space-y-3 pb-4",children:(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsxs)("button",{onClick:()=>m(!0),className:"group relative bg-gradient-to-br from-purple-600 to-purple-700 hover:from-purple-500 hover:to-purple-600 p-4 rounded-lg transition-all duration-300 shadow-lg hover:shadow-[0_0_30px_rgba(168,85,247,0.4)] flex flex-col items-center gap-2 overflow-hidden",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-purple-800/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),(0,t.jsx)(c.A,{className:"w-5 h-5 relative z-10 group-hover:scale-110 transition-transform"}),(0,t.jsx)("span",{className:"text-xs relative z-10 tracking-wide",children:"Add Friend"}),(0,t.jsx)("div",{className:"absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-white/30 to-transparent"})]}),(0,t.jsxs)("button",{onClick:()=>e("settings"),className:"group relative bg-gradient-to-br from-blue-600 to-blue-700 hover:from-blue-500 hover:to-blue-600 p-4 rounded-lg transition-all duration-300 shadow-lg hover:shadow-[0_0_30px_rgba(59,130,246,0.4)] flex flex-col items-center gap-2 overflow-hidden",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-blue-800/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),(0,t.jsx)(l.A,{className:"w-5 h-5 relative z-10 group-hover:rotate-90 transition-transform duration-300"}),(0,t.jsx)("span",{className:"text-xs relative z-10 tracking-wide",children:"Settings"}),(0,t.jsx)("div",{className:"absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-white/30 to-transparent"})]})]})}),!_&&(0,t.jsxs)("div",{className:"relative bg-gradient-to-br from-blue-600/20 to-blue-700/20 rounded-xl p-4 border border-blue-500/30 shadow-lg overflow-hidden",children:[(0,t.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 bg-blue-500/10 rounded-full blur-3xl"}),(0,t.jsxs)("div",{className:"relative z-10 text-center space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,t.jsxs)("svg",{className:"w-5 h-5 text-blue-400",viewBox:"0 0 24 24",children:[(0,t.jsx)("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,t.jsx)("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,t.jsx)("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,t.jsx)("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),(0,t.jsx)("h3",{className:"text-lg font-medium text-blue-300",children:"Sign in to unlock features"})]}),(0,t.jsx)("p",{className:"text-sm text-blue-200/80",children:"Connect with friends, track your progress, and compete on the leaderboard"}),(0,t.jsxs)("button",{onClick:K,className:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-500 hover:to-blue-600 text-white px-6 py-3 rounded-lg font-medium transition-all duration-200 shadow-lg hover:shadow-xl flex items-center gap-2 mx-auto",children:[(0,t.jsxs)("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[(0,t.jsx)("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,t.jsx)("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,t.jsx)("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,t.jsx)("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Sign in with Google"]})]})]})]}),h&&(0,t.jsx)("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-md flex items-center justify-center p-6 z-50 animate-fadeIn",children:(0,t.jsxs)("div",{className:"relative bg-gradient-to-br from-[#2d2d2d] via-[#2d2d2d] to-[#252525] rounded-xl p-6 w-full max-w-sm border border-purple-500/30 shadow-2xl shadow-purple-500/20 overflow-hidden",children:[(0,t.jsx)("div",{className:"absolute top-0 left-0 w-8 h-8 border-t-2 border-l-2 border-purple-500/60"}),(0,t.jsx)("div",{className:"absolute top-0 right-0 w-8 h-8 border-t-2 border-r-2 border-purple-500/60"}),(0,t.jsx)("div",{className:"absolute bottom-0 left-0 w-8 h-8 border-b-2 border-l-2 border-purple-500/60"}),(0,t.jsx)("div",{className:"absolute bottom-0 right-0 w-8 h-8 border-b-2 border-r-2 border-purple-500/60"}),(0,t.jsx)("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-48 h-48 bg-purple-500/20 rounded-full blur-3xl"}),(0,t.jsxs)("div",{className:"relative z-10",children:[(0,t.jsxs)("h3",{className:"text-lg mb-4 flex items-center gap-2",children:[(0,t.jsx)(c.A,{className:"w-5 h-5 text-purple-400"}),"Add Friend"]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm text-[#a3a3a3] mb-2 block tracking-wide",children:"Email or Username"}),(0,t.jsx)("input",{type:"text",value:g,onChange:e=>b(e.target.value),onKeyDown:e=>"Enter"===e.key&&J(),placeholder:"friend@example.com",className:"w-full bg-[#1a1a1a] border border-white/10 rounded-lg px-3 py-2.5 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all placeholder:text-[#505050]"})]}),(0,t.jsxs)("div",{className:"flex gap-3 pt-2",children:[(0,t.jsx)("button",{onClick:()=>m(!1),className:"flex-1 bg-[#3a3a3a] hover:bg-[#404040] px-4 py-2.5 rounded-lg transition-all border border-white/5 hover:border-white/10",children:"Cancel"}),(0,t.jsx)("button",{onClick:J,disabled:f,className:"flex-1 bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-500 hover:to-purple-600 px-4 py-2.5 rounded-lg transition-all shadow-lg shadow-purple-500/30 hover:shadow-purple-500/50 disabled:opacity-50 disabled:cursor-not-allowed",children:f?"Adding...":"Add Friend"})]})]})]})]})}),!_&&(0,t.jsx)("div",{className:"absolute top-4 right-4 flex flex-col gap-2",children:(0,t.jsxs)("button",{onClick:K,className:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-500 hover:to-blue-600 text-white px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 shadow-lg hover:shadow-xl flex items-center gap-2",children:[(0,t.jsxs)("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",children:[(0,t.jsx)("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,t.jsx)("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,t.jsx)("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,t.jsx)("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Sign in with Google"]})}),k&&S&&(0,t.jsx)(j,{userId:S.userId,userName:S.userName,userEmail:S.userEmail,isOpen:k,onClose:()=>{C(!1),E(null)}})]})}}}]);