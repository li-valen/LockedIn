if("undefined"!=typeof window){const e=document.createElement;document.createElement=function(r){const s=e.call(this,r);if("script"===r.toLowerCase()){const e=s.setAttribute;s.setAttribute=function(r,s){if("src"!==r||!s.includes("apis.google.com")&&!s.includes("recaptcha"))return e.call(this,r,s);console.warn("External script loading blocked:",s)}}return s}}(self.webpackChunklockedin_extension=self.webpackChunklockedin_extension||[]).push([[890],{1890:(e,r,s)=>{s.d(r,{SettingsPage:()=>g});var t=s(4848),a=s(6540),l=s(4471),o=s(6110),i=s(232),d=s(7235),n=s(684),c=s(697),u=s(7792),p=s(2708),h=s(8686),x=s(3893),m=s(51),b=s(6164);function g({onNavigate:e}){const[r,s]=(0,a.useState)("sites"),[g,v]=(0,a.useState)(""),[f,w]=(0,a.useState)(""),[j,N]=(0,a.useState)([]),[y,k]=(0,a.useState)([]),[A,S]=(0,a.useState)([]),[U,C]=(0,a.useState)(!1),[F,W]=(0,a.useState)({workTime:0,dailyWorkTime:0,isWorking:!1}),[E,T]=(0,a.useState)(3),[_,q]=(0,a.useState)(!1);(0,a.useEffect)(()=>{(async()=>{if(m.j2.currentUser)try{await b.Ky.cleanupDuplicateFriends(m.j2.currentUser.uid);const e=await b.Ky.getFriends(m.j2.currentUser.uid);k(e);const r=await b.Ky.getPendingRequests(m.j2.currentUser.uid);S(r)}catch(e){console.error("Error loading friends:",e)}})()},[]),(0,a.useEffect)(()=>{(async()=>{try{const e=await chrome.runtime.sendMessage({action:"getWorkSites"});e&&e.workSites&&N(e.workSites)}catch(e){console.error("Failed to load work sites:",e)}})()},[]),(0,a.useEffect)(()=>{const e=async()=>{try{const e=await chrome.runtime.sendMessage({action:"getWorkTime"});e&&W({workTime:e.workTime||0,dailyWorkTime:e.dailyWorkTime||0,isWorking:e.isWorking||!1})}catch(e){console.error("Failed to fetch work data:",e)}};e();const r=setInterval(e,5e3);return()=>clearInterval(r)},[]),(0,a.useEffect)(()=>{(async()=>{if(m.j2.currentUser)try{const e=await b.DL.getUserWithStreak(m.j2.currentUser.uid);e&&T(e.dailyGoal)}catch(e){console.error("Error loading daily goal:",e)}})()},[]);const K=async()=>{if(g.trim())try{const e=await chrome.runtime.sendMessage({action:"addWorkSite",site:g.trim()});e&&e.success&&(N([...j,g.trim()]),v(""))}catch(e){console.error("Failed to add work site:",e)}},z=async e=>{try{if(await b.Ky.removeFriend(e),m.j2.currentUser){const e=await b.Ky.getFriends(m.j2.currentUser.uid);k(e);const r=await b.Ky.getPendingRequests(m.j2.currentUser.uid);S(r)}}catch(e){console.error("Error removing friend:",e),alert("Failed to remove friend")}},M=[{id:"sites",label:"Sites",icon:n.A},{id:"friends",label:"Friends",icon:x.A},{id:"profile",label:"Profile",icon:h.A}];return(0,t.jsxs)("div",{className:"w-full h-full bg-[#1a1a1a] text-[#e5e5e5] flex flex-col relative overflow-hidden",children:[(0,t.jsx)("div",{className:"absolute inset-0 opacity-[0.03] pointer-events-none",children:(0,t.jsx)("div",{className:"absolute inset-0",style:{backgroundImage:"\n            linear-gradient(rgba(168, 85, 247, 0.3) 1px, transparent 1px),\n            linear-gradient(90deg, rgba(168, 85, 247, 0.3) 1px, transparent 1px)\n          ",backgroundSize:"20px 20px"}})}),(0,t.jsxs)("div",{className:"relative bg-gradient-to-r from-[#2d2d2d] via-[#2d2d2d] to-[#3a3a3a] p-4 border-b border-white/10",children:[(0,t.jsx)("div",{className:"absolute top-0 left-0 w-8 h-8 border-t-2 border-l-2 border-purple-500/50"}),(0,t.jsx)("div",{className:"absolute top-0 right-0 w-8 h-8 border-t-2 border-r-2 border-purple-500/50"}),(0,t.jsxs)("div",{className:"flex items-center gap-3 relative z-10",children:[(0,t.jsx)("button",{onClick:()=>e("main"),className:"p-2 hover:bg-white/5 rounded-lg transition-all duration-300 group",children:(0,t.jsx)(i.A,{className:"w-5 h-5 group-hover:-translate-x-1 transition-transform"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-xl tracking-wide",children:"Settings"}),(0,t.jsx)("div",{className:"h-px w-16 bg-gradient-to-r from-purple-500 to-transparent"})]})]})]}),(0,t.jsx)("div",{className:"flex border-b border-white/10 bg-[#2d2d2d] relative",children:M.map((e,a)=>{const l=e.icon;return(0,t.jsxs)("button",{onClick:()=>s(e.id),className:"flex-1 flex flex-col items-center gap-1.5 py-3 transition-all duration-300 relative "+(r===e.id?"text-purple-400":"text-[#a3a3a3] hover:text-[#e5e5e5]"),children:[(0,t.jsx)(l,{className:"w-4 h-4 transition-all "+(r===e.id?"drop-shadow-[0_0_8px_rgba(168,85,247,0.6)]":"")}),(0,t.jsx)("span",{className:"text-xs tracking-wide",children:e.label}),r===e.id&&(0,t.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r from-transparent via-purple-500 to-transparent shadow-[0_0_10px_rgba(168,85,247,0.5)]"})]},e.id)})}),(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 relative z-10",children:["sites"===r&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("p",{className:"text-sm text-[#a3a3a3] leading-relaxed",children:"Add websites where you do productive work. LockedIn will track time spent on these sites."}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("input",{type:"text",value:g,onChange:e=>v(e.target.value),onKeyDown:e=>"Enter"===e.key&&K(),placeholder:"example.com",className:"flex-1 bg-[#2d2d2d] border border-white/10 rounded-lg px-3 py-2.5 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all placeholder:text-[#505050]"}),(0,t.jsxs)("button",{onClick:K,className:"bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-500 hover:to-purple-600 px-4 py-2 rounded-lg transition-all shadow-lg shadow-purple-500/30 hover:shadow-purple-500/50 flex items-center gap-2",children:[(0,t.jsx)(c.A,{className:"w-4 h-4"}),"Add"]})]}),(0,t.jsx)("div",{className:"space-y-2",children:j.map((e,r)=>(0,t.jsxs)("div",{className:"group relative bg-gradient-to-br from-[#2d2d2d] to-[#252525] rounded-lg p-3 border border-white/5 flex items-center justify-between hover:border-purple-500/30 transition-all duration-300 overflow-hidden",children:[(0,t.jsx)("div",{className:"absolute top-0 left-0 w-2 h-2 border-t border-l border-purple-400/30 group-hover:border-purple-400/60 transition-colors"}),(0,t.jsx)("div",{className:"absolute bottom-0 right-0 w-2 h-2 border-b border-r border-purple-400/30 group-hover:border-purple-400/60 transition-colors"}),(0,t.jsxs)("div",{className:"flex items-center gap-3 relative z-10",children:[(0,t.jsx)(n.A,{className:"w-4 h-4 text-purple-400"}),(0,t.jsx)("span",{children:e})]}),(0,t.jsx)("button",{onClick:()=>(async e=>{try{const r=await chrome.runtime.sendMessage({action:"removeWorkSite",site:e});r&&r.success&&N(j.filter(r=>r!==e))}catch(e){console.error("Failed to remove work site:",e)}})(e),className:"p-1.5 hover:bg-red-500/20 rounded transition-all group/btn relative z-10",children:(0,t.jsx)(p.A,{className:"w-4 h-4 text-red-400 group-hover/btn:scale-110 transition-transform"})})]},e))})]}),"friends"===r&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("p",{className:"text-sm text-[#a3a3a3] leading-relaxed",children:"Connect with friends to see their productivity and compete on the leaderboard."}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("input",{type:"text",value:f,onChange:e=>w(e.target.value),placeholder:"Email or username",className:"flex-1 bg-[#2d2d2d] border border-white/10 rounded-lg px-3 py-2.5 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all placeholder:text-[#505050]"}),(0,t.jsxs)("button",{onClick:async()=>{if(f.trim()&&m.j2.currentUser&&!U){C(!0);try{await b.Ky.sendFriendRequest(m.j2.currentUser.uid,f.trim()),w(""),alert("Friend request sent!");const e=await b.Ky.getPendingRequests(m.j2.currentUser.uid);S(e)}catch(e){console.error("Error sending friend request:",e),alert(`Error: ${e instanceof Error?e.message:"Failed to send request"}`)}finally{C(!1)}}},disabled:U,className:"bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-500 hover:to-purple-600 px-4 py-2 rounded-lg transition-all shadow-lg shadow-purple-500/30 hover:shadow-purple-500/50 flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,t.jsx)(c.A,{className:"w-4 h-4"}),U?"Adding...":"Add"]})]}),(0,t.jsx)("div",{className:"space-y-2",children:y.map(e=>(0,t.jsxs)("div",{className:"group relative bg-gradient-to-br from-[#2d2d2d] to-[#252525] rounded-lg p-3 border border-white/5 flex items-center justify-between hover:border-purple-500/30 transition-all duration-300 overflow-hidden",children:[(0,t.jsx)("div",{className:"absolute top-0 left-0 w-2 h-2 border-t border-l border-purple-400/30 group-hover:border-purple-400/60 transition-colors"}),(0,t.jsx)("div",{className:"absolute bottom-0 right-0 w-2 h-2 border-b border-r border-purple-400/30 group-hover:border-purple-400/60 transition-colors"}),(0,t.jsxs)("div",{className:"flex items-center gap-3 relative z-10",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-purple-500 to-purple-700 flex items-center justify-center shadow-lg shadow-purple-500/30",children:(0,t.jsx)("span",{children:e.friendName.charAt(0).toUpperCase()})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{children:e.friendName}),(0,t.jsx)("div",{className:"text-xs text-[#a3a3a3]",children:e.friendEmail})]})]}),(0,t.jsx)("button",{onClick:()=>z(e.id),className:"p-1.5 hover:bg-red-500/20 rounded transition-all group/btn relative z-10",children:(0,t.jsx)(p.A,{className:"w-4 h-4 text-red-400 group-hover/btn:scale-110 transition-transform"})})]},e.id))}),A.length>0&&(0,t.jsxs)("div",{className:"mt-6",children:[(0,t.jsxs)("h3",{className:"text-sm font-medium text-[#e5e5e5] mb-3 flex items-center gap-2",children:[(0,t.jsx)(x.A,{className:"w-4 h-4 text-purple-400"}),"Pending Requests (",A.length,")"]}),(0,t.jsx)("div",{className:"space-y-2",children:A.map(e=>(0,t.jsxs)("div",{className:"group relative bg-gradient-to-br from-[#2d2d2d] to-[#252525] rounded-lg p-3 border border-yellow-500/20 flex items-center justify-between hover:border-yellow-500/40 transition-all duration-300 overflow-hidden",children:[(0,t.jsx)("div",{className:"absolute top-0 left-0 w-2 h-2 border-t border-l border-yellow-400/30 group-hover:border-yellow-400/60 transition-colors"}),(0,t.jsx)("div",{className:"absolute bottom-0 right-0 w-2 h-2 border-b border-r border-yellow-400/30 group-hover:border-yellow-400/60 transition-colors"}),(0,t.jsxs)("div",{className:"flex items-center gap-3 relative z-10",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-yellow-500 to-yellow-700 flex items-center justify-center shadow-lg shadow-yellow-500/30",children:(0,t.jsx)("span",{children:e.friendName.charAt(0).toUpperCase()})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{children:e.friendName}),(0,t.jsx)("div",{className:"text-xs text-[#a3a3a3]",children:e.friendEmail}),(0,t.jsx)("div",{className:"text-xs text-yellow-400",children:"Wants to be friends"})]})]}),(0,t.jsxs)("div",{className:"flex gap-2 relative z-10",children:[(0,t.jsx)("button",{onClick:()=>(async e=>{try{if(await b.Ky.acceptFriendRequest(e),m.j2.currentUser){const e=await b.Ky.getFriends(m.j2.currentUser.uid);k(e);const r=await b.Ky.getPendingRequests(m.j2.currentUser.uid);S(r)}}catch(e){console.error("Error accepting friend request:",e),alert("Failed to accept friend request")}})(e.id),className:"p-1.5 hover:bg-green-500/20 rounded transition-all group/btn",children:(0,t.jsx)(l.A,{className:"w-4 h-4 text-green-400 group-hover/btn:scale-110 transition-transform"})}),(0,t.jsx)("button",{onClick:()=>z(e.id),className:"p-1.5 hover:bg-red-500/20 rounded transition-all group/btn",children:(0,t.jsx)(p.A,{className:"w-4 h-4 text-red-400 group-hover/btn:scale-110 transition-transform"})})]})]},e.id))})]})]}),"profile"===r&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"relative bg-gradient-to-br from-[#2d2d2d] via-[#2d2d2d] to-[#252525] rounded-xl p-6 border border-white/5 overflow-hidden",children:[(0,t.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 bg-purple-500/10 rounded-full blur-3xl"}),(0,t.jsxs)("div",{className:"flex flex-col items-center gap-4 relative z-10",children:[(0,t.jsxs)("div",{className:"relative w-20 h-20 rounded-full bg-gradient-to-br from-purple-500 to-purple-700 flex items-center justify-center text-3xl shadow-lg shadow-purple-500/50 ring-4 ring-purple-400/20",children:[m.j2.currentUser?.displayName?.charAt(0).toUpperCase()||"👤",(0,t.jsx)("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 bg-green-400 rounded-full border-4 border-[#2d2d2d] shadow-[0_0_15px_rgba(74,222,128,0.6)] flex items-center justify-center",children:(0,t.jsx)(o.A,{className:"w-3 h-3 text-white"})})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h3",{className:"text-lg tracking-wide",children:m.j2.currentUser?.displayName||"Anonymous User"}),(0,t.jsx)("p",{className:"text-sm text-[#a3a3a3]",children:m.j2.currentUser?.email||"No email"}),(0,t.jsx)("div",{className:"mt-2 px-3 py-1 bg-green-500/20 text-green-400 rounded-full text-xs border border-green-500/30",children:"Active Now"})]})]})]}),(0,t.jsxs)("div",{className:"relative bg-gradient-to-br from-[#2d2d2d] to-[#252525] rounded-xl p-6 border border-white/5 overflow-hidden",children:[(0,t.jsx)("div",{className:"absolute top-0 left-0 w-2 h-2 border-t border-l border-purple-400/30"}),(0,t.jsx)("div",{className:"absolute bottom-0 right-0 w-2 h-2 border-b border-r border-purple-400/30"}),(0,t.jsxs)("h3",{className:"mb-4 flex items-center gap-2",children:[(0,t.jsx)(u.A,{className:"w-5 h-5 text-purple-400"}),"Daily Goal"]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-[#a3a3a3]",children:"Target Hours"}),(0,t.jsxs)("span",{className:"text-lg font-mono text-purple-400",children:[E,"h"]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("input",{type:"range",min:"1",max:"12",step:"0.5",value:E,onChange:e=>T(parseFloat(e.target.value)),className:"w-full h-2 bg-[#1a1a1a] rounded-full appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-4 [&::-webkit-slider-thumb]:h-4 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-gradient-to-br [&::-webkit-slider-thumb]:from-purple-500 [&::-webkit-slider-thumb]:to-purple-700 [&::-webkit-slider-thumb]:shadow-lg [&::-webkit-slider-thumb]:shadow-purple-500/50 [&::-webkit-slider-thumb]:cursor-pointer"}),(0,t.jsxs)("div",{className:"flex justify-between text-xs text-[#a3a3a3]",children:[(0,t.jsx)("span",{children:"1h"}),(0,t.jsx)("span",{children:"12h"})]})]}),(0,t.jsx)("button",{onClick:()=>(async e=>{if(m.j2.currentUser&&!_){q(!0);try{await b.DL.updateUser(m.j2.currentUser.uid,{dailyGoal:e}),T(e),alert(`Daily goal updated to ${e} hours!`)}catch(e){console.error("Error updating daily goal:",e),alert("Failed to update daily goal")}finally{q(!1)}}})(E),disabled:_,className:"w-full bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-500 hover:to-purple-600 px-4 py-2.5 rounded-lg transition-all shadow-lg shadow-purple-500/30 hover:shadow-purple-500/50 disabled:opacity-50 disabled:cursor-not-allowed",children:_?"Saving...":"Save Goal"})]})]}),(0,t.jsxs)("div",{className:"relative bg-gradient-to-br from-[#2d2d2d] to-[#252525] rounded-xl p-6 border border-white/5 overflow-hidden",children:[(0,t.jsx)("div",{className:"absolute top-0 left-0 w-2 h-2 border-t border-l border-purple-400/30"}),(0,t.jsx)("div",{className:"absolute bottom-0 right-0 w-2 h-2 border-b border-r border-purple-400/30"}),(0,t.jsxs)("h3",{className:"mb-4 flex items-center gap-2",children:[(0,t.jsx)(d.A,{className:"w-5 h-5 text-purple-400"}),"Today's Progress"]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-[#a3a3a3]",children:"Work Time"}),(0,t.jsxs)("span",{className:"text-lg font-mono text-purple-400",children:[(F.dailyWorkTime/36e5).toFixed(1),"h"]})]}),(0,t.jsx)("div",{className:"w-full bg-[#1a1a1a] rounded-full h-2",children:(0,t.jsx)("div",{className:"bg-gradient-to-r from-purple-500 to-purple-600 h-2 rounded-full transition-all duration-500",style:{width:`${Math.min(F.dailyWorkTime/(36e5*E)*100,100)}%`}})}),(0,t.jsxs)("div",{className:"text-xs text-[#a3a3a3] text-center",children:[Math.round(F.dailyWorkTime/(36e5*E)*100),"% of daily goal (",E,"h)"]})]})]}),(0,t.jsx)("div",{className:"grid grid-cols-2 gap-3",children:[{label:"Today",value:`${(F.dailyWorkTime/36e5).toFixed(1)}h`,color:"purple",icon:"📅"},{label:"Current Session",value:`${(F.workTime/36e5).toFixed(1)}h`,color:"blue",icon:"⭐"},{label:"Status",value:F.isWorking?"Working":"Idle",color:F.isWorking?"green":"yellow",icon:F.isWorking?"🔥":"😴"},{label:"Friends",value:y.length.toString(),color:"yellow",icon:"👥"}].map((e,r)=>(0,t.jsxs)("div",{className:"relative bg-gradient-to-br from-[#2d2d2d] to-[#252525] rounded-lg p-4 border border-white/5 text-center overflow-hidden group hover:border-purple-500/30 transition-all duration-300",children:[(0,t.jsx)("div",{className:"absolute top-0 left-0 w-2 h-2 border-t border-l border-purple-400/30"}),(0,t.jsx)("div",{className:"absolute bottom-0 right-0 w-2 h-2 border-b border-r border-purple-400/30"}),(0,t.jsxs)("div",{className:"relative z-10",children:[(0,t.jsx)("div",{className:"text-lg mb-1",children:e.icon}),(0,t.jsx)("div",{className:"text-xl text-purple-400 mb-1 font-mono",children:e.value}),(0,t.jsx)("div",{className:"text-xs text-[#a3a3a3] uppercase tracking-wider",children:e.label})]})]},e.label))}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("h3",{className:"mb-3 flex items-center gap-2",children:[(0,t.jsx)(n.A,{className:"w-5 h-5 text-purple-400"}),"Tracked Sites"]}),(0,t.jsx)("div",{className:"space-y-2",children:j.length>0?j.map((e,r)=>(0,t.jsxs)("div",{className:"relative bg-gradient-to-br from-[#2d2d2d] to-[#252525] rounded-lg p-3 border border-white/5 flex items-center gap-3 overflow-hidden group hover:border-purple-500/30 transition-all duration-300",children:[(0,t.jsx)("div",{className:"absolute top-0 left-0 w-2 h-2 border-t border-l border-purple-400/30"}),(0,t.jsx)("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("div",{className:"text-sm",children:e}),(0,t.jsx)("div",{className:"text-xs text-[#a3a3a3]",children:"Currently tracking"})]})]},r)):(0,t.jsx)("div",{className:"text-center py-8 text-[#a3a3a3] text-sm",children:"No sites being tracked yet"})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsxs)("button",{onClick:()=>s("sites"),className:"relative bg-gradient-to-br from-purple-600 to-purple-700 hover:from-purple-500 hover:to-purple-600 p-4 rounded-lg transition-all duration-300 shadow-lg hover:shadow-[0_0_30px_rgba(168,85,247,0.4)] flex flex-col items-center gap-2 overflow-hidden",children:[(0,t.jsx)(n.A,{className:"w-5 h-5"}),(0,t.jsx)("span",{className:"text-xs",children:"Manage Sites"})]}),(0,t.jsxs)("button",{onClick:()=>s("friends"),className:"relative bg-gradient-to-br from-blue-600 to-blue-700 hover:from-blue-500 hover:to-blue-600 p-4 rounded-lg transition-all duration-300 shadow-lg hover:shadow-[0_0_30px_rgba(59,130,246,0.4)] flex flex-col items-center gap-2 overflow-hidden",children:[(0,t.jsx)(x.A,{className:"w-5 h-5"}),(0,t.jsx)("span",{className:"text-xs",children:"Manage Friends"})]})]})]})]})]})}}}]);